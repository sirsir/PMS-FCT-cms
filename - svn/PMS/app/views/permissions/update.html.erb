<%=javascript_include_tag "prototype" %>
<%=javascript_include_tag "application" %>
<%=javascript_include_tag "dialog" %>
<%=javascript_include_tag "fr" %>
<script type="text/javascript">
<% if @permissions.all?{|p| p.errors.empty? } %>
  <%
  tr_id = "#{@screen.id}_#{@permission.screen_id || @permission.field_id}"
  %>
    fncUpdateTrToTableContent(<%= @screen.id %>, "<%= tr_id %>");
    
    var main_doc = fncGetMainDocument();
    var div = main_doc.getElementById("operation_area_<%= @screen.id %>");
    fncClearDiv(div);
<% else %>
    fncSetError('<%=error_messages_for(:object => @permissions).to_s.gsub(/'/, "&rsquo\;") %>');
<% end %>

  fncLoadTempFrame();
</script>
