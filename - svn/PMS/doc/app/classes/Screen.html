<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Screen</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Screen</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/screen_rb.html">
                app/models/screen.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ActiveRecord/Base.html">
                ActiveRecord::Base
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000255">accumulate_fields</a>&nbsp;&nbsp;
      <a href="#M000239">allow_action?</a>&nbsp;&nbsp;
      <a href="#M000202">childs</a>&nbsp;&nbsp;
      <a href="#M000257">comparable_fields</a>&nbsp;&nbsp;
      <a href="#M000209">control_revision?</a>&nbsp;&nbsp;
      <a href="#M000256">date_fields</a>&nbsp;&nbsp;
      <a href="#M000214">default_sort_field_id_order</a>&nbsp;&nbsp;
      <a href="#M000235">dependencies</a>&nbsp;&nbsp;
      <a href="#M000236">dependents</a>&nbsp;&nbsp;
      <a href="#M000237">dependents?</a>&nbsp;&nbsp;
      <a href="#M000222">display_as_menu_item?</a>&nbsp;&nbsp;
      <a href="#M000220">display_in_menu?</a>&nbsp;&nbsp;
      <a href="#M000205">field</a>&nbsp;&nbsp;
      <a href="#M000211">field_level</a>&nbsp;&nbsp;
      <a href="#M000262">filter_custom_fields</a>&nbsp;&nbsp;
      <a href="#M000218">find_by_dynamic</a>&nbsp;&nbsp;
      <a href="#M000238">find_by_row_desctiption</a>&nbsp;&nbsp;
      <a href="#M000267">find_descr_field</a>&nbsp;&nbsp;
      <a href="#M000216">from_action</a>&nbsp;&nbsp;
      <a href="#M000224">generate_xml</a>&nbsp;&nbsp;
      <a href="#M000250">get_alias_screen</a>&nbsp;&nbsp;
      <a href="#M000252">get_alias_screen_name</a>&nbsp;&nbsp;
      <a href="#M000249">get_parent_screen</a>&nbsp;&nbsp;
      <a href="#M000251">get_relate_screen</a>&nbsp;&nbsp;
      <a href="#M000253">get_relate_screen_name</a>&nbsp;&nbsp;
      <a href="#M000248">get_releted_screens_for_special_search</a>&nbsp;&nbsp;
      <a href="#M000246">get_staff_ref_field_id</a>&nbsp;&nbsp;
      <a href="#M000230">has_a?</a>&nbsp;&nbsp;
      <a href="#M000232">has_a_auto_numbering_with_unique?</a>&nbsp;&nbsp;
      <a href="#M000221">has_child_display_in_menu?</a>&nbsp;&nbsp;
      <a href="#M000261">has_field</a>&nbsp;&nbsp;
      <a href="#M000254">has_field?</a>&nbsp;&nbsp;
      <a href="#M000247">has_issue_tracking_field</a>&nbsp;&nbsp;
      <a href="#M000243">has_login_custom_field?</a>&nbsp;&nbsp;
      <a href="#M000245">has_loginfield?</a>&nbsp;&nbsp;
      <a href="#M000259">has_required_search?</a>&nbsp;&nbsp;
      <a href="#M000231">has_scr_field?</a>&nbsp;&nbsp;
      <a href="#M000265">header_fields</a>&nbsp;&nbsp;
      <a href="#M000260">include_required_search?</a>&nbsp;&nbsp;
      <a href="#M000233">l2r_custom_fields</a>&nbsp;&nbsp;
      <a href="#M000206">label_descr</a>&nbsp;&nbsp;
      <a href="#M000207">label_descr_with_name</a>&nbsp;&nbsp;
      <a href="#M000210">level</a>&nbsp;&nbsp;
      <a href="#M000212">list_fields_level</a>&nbsp;&nbsp;
      <a href="#M000242">login_reference_custom_field_ids</a>&nbsp;&nbsp;
      <a href="#M000240">menu_group_screen?</a>&nbsp;&nbsp;
      <a href="#M000201">missing_msg</a>&nbsp;&nbsp;
      <a href="#M000213">non_ref_description_custom_field_ids</a>&nbsp;&nbsp;
      <a href="#M000264">option_combined_reference_field</a>&nbsp;&nbsp;
      <a href="#M000215">path_ids</a>&nbsp;&nbsp;
      <a href="#M000241">permission</a>&nbsp;&nbsp;
      <a href="#M000219">permissionable</a>&nbsp;&nbsp;
      <a href="#M000223">prefix</a>&nbsp;&nbsp;
      <a href="#M000266">reference_attribute_fields</a>&nbsp;&nbsp;
      <a href="#M000229">reference_custom_field_ids</a>&nbsp;&nbsp;
      <a href="#M000228">reference_custom_fields</a>&nbsp;&nbsp;
      <a href="#M000258">references_custom_fields</a>&nbsp;&nbsp;
      <a href="#M000226">relation_types</a>&nbsp;&nbsp;
      <a href="#M000225">relations</a>&nbsp;&nbsp;
      <a href="#M000204">reload_uncached_association</a>&nbsp;&nbsp;
      <a href="#M000268">require_permission?</a>&nbsp;&nbsp;
      <a href="#M000234">scr_custom_fields</a>&nbsp;&nbsp;
      <a href="#M000263">screen_combined_reference_field</a>&nbsp;&nbsp;
      <a href="#M000217">screen_dynamic</a>&nbsp;&nbsp;
      <a href="#M000208">system?</a>&nbsp;&nbsp;
      <a href="#M000203">transaction_childs</a>&nbsp;&nbsp;
      <a href="#M000244">unuse_user</a>&nbsp;&nbsp;
      <a href="#M000227">used?</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">field_hash</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000218" class="method-detail">
        <a name="M000218"></a>

        <div class="method-heading">
          <a href="#M000218" class="method-signature">
          <span class="method-name">find_by_dynamic</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000218-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000218-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 198</span>
198:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find_by_dynamic</span>()
199:     <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;system = ? &quot;</span>, <span class="ruby-value">0</span>])
200:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000216" class="method-detail">
        <a name="M000216"></a>

        <div class="method-heading">
          <a href="#M000216" class="method-signature">
          <span class="method-name">from_action</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000216-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000216-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">from_action</span>(<span class="ruby-identifier">options</span>={})
151:     <span class="ruby-identifier">defaults</span> = {
152:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:controller</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;screens&quot;</span>,
153:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:action</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>,
154:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:screen_id</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>
155:     }
156:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
157:     
158:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:controller</span>].<span class="ruby-identifier">to_s</span>
159:     <span class="ruby-identifier">action</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:action</span>].<span class="ruby-identifier">to_s</span>
160:     <span class="ruby-identifier">screen_id</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:screen_id</span>].<span class="ruby-identifier">to_i</span>
161:     
162:     <span class="ruby-ivar">@@cached_screens_by_action</span> <span class="ruby-operator">||=</span> {}
163: 
164:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">screen_id</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@@cached_screens_by_action</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">controller</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">controller</span>].<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">action</span>)
165:       <span class="ruby-identifier">screen_id</span> = <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">controller</span>][<span class="ruby-identifier">action</span>].<span class="ruby-identifier">id</span>
166:     <span class="ruby-keyword kw">end</span>
167:     
168:     <span class="ruby-comment cmt"># screen_id nil : specify n/a, and not found in hash</span>
169:     <span class="ruby-comment cmt"># screen_id not nil : specify screen_id or found in hash</span>
170:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">screen_id</span>].<span class="ruby-identifier">nil?</span>
171:       <span class="ruby-identifier">screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;(action = ? and controller = ?) or id = ?&quot;</span>, <span class="ruby-identifier">action</span>, <span class="ruby-identifier">controller</span>, <span class="ruby-identifier">screen_id</span>])
172:       
173:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">nil?</span>
174:         <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">screen</span>
175: 
176:         <span class="ruby-comment cmt"># Don't cache the controller &amp; action for dynamic screens</span>
177:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">system?</span>
178:           <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">controller</span>] <span class="ruby-operator">||=</span> {}
179:           <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">controller</span>][<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">action</span>] = <span class="ruby-identifier">screen</span>
180:         <span class="ruby-keyword kw">end</span>
181: 
182:         <span class="ruby-identifier">screen_id</span> = <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">id</span>
183:       <span class="ruby-keyword kw">end</span>
184:     <span class="ruby-keyword kw">end</span>
185:     
186:     <span class="ruby-identifier">screen</span> = <span class="ruby-ivar">@@cached_screens_by_action</span>[<span class="ruby-identifier">screen_id</span>]
187: 
188:     <span class="ruby-comment cmt"># Don't cache the data if running in development env</span>
189:     <span class="ruby-ivar">@@cached_screens_by_action</span> = {} <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
190: 
191:     <span class="ruby-identifier">screen</span>
192:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000201" class="method-detail">
        <a name="M000201"></a>

        <div class="method-heading">
          <a href="#M000201" class="method-signature">
          <span class="method-name">missing_msg</span><span class="method-args">(screen_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000201-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000201-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/screen.rb, line 22</span>
22:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">missing_msg</span>(<span class="ruby-identifier">screen_id</span>)
23:       <span class="ruby-node">&quot;&lt;span class='error_message'&gt;Screen with ID=#{screen_id} is missing!&lt;/span&gt;&quot;</span>
24:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000219" class="method-detail">
        <a name="M000219"></a>

        <div class="method-heading">
          <a href="#M000219" class="method-signature">
          <span class="method-name">permissionable</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000219-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000219-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">permissionable</span>()
203:     <span class="ruby-identifier">setting_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">from_action</span>(<span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;setting&quot;</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;front_desk&quot;</span>)
204:     <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;type NOT IN (?) and screen_id &lt;&gt; ? &quot;</span>, <span class="ruby-value str">&quot;MenuGroupScreen&quot;</span>, <span class="ruby-identifier">setting_screen</span>.<span class="ruby-identifier">id</span>])
205:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000217" class="method-detail">
        <a name="M000217"></a>

        <div class="method-heading">
          <a href="#M000217" class="method-signature">
          <span class="method-name">screen_dynamic</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000217-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000217-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">screen_dynamic</span>()
195:     <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;action = ? and controller = ? &quot;</span>, <span class="ruby-value str">&quot;screen&quot;</span>, <span class="ruby-value str">&quot;front_desk&quot;</span>])
196:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000255" class="method-detail">
        <a name="M000255"></a>

        <div class="method-heading">
          <a href="#M000255" class="method-signature">
          <span class="method-name">accumulate_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000255-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000255-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 684</span>
684:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accumulate_fields</span>
685:     <span class="ruby-identifier">accumulate_fields</span> = []
686:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
687: <span class="ruby-comment cmt">#      if (field.is_a?(Fields::Accumulation) or field.is_a?(Fields::Formula) or field.is_a?(Fields::HeaderInfo))</span>
688: <span class="ruby-comment cmt">#        accumulate_fields &lt;&lt; field</span>
689: <span class="ruby-comment cmt">#      elsif !field.custom_field.nil?</span>
690: <span class="ruby-comment cmt">#        accumulate_fields &lt;&lt; field if field.custom_field.is_a?(CustomFields::NumericField) or field.custom_field.is_a?(CustomFields::Reference)  or field.custom_field.is_a?(CustomFields::CodeCombindedReferenceAttribute)</span>
691:       <span class="ruby-identifier">accumulate_fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>
692: <span class="ruby-comment cmt">#    end</span>
693: 
694:     <span class="ruby-keyword kw">end</span>
695:    <span class="ruby-identifier">accumulate_fields</span>
696:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000239" class="method-detail">
        <a name="M000239"></a>

        <div class="method-heading">
          <a href="#M000239" class="method-signature">
          <span class="method-name">allow_action?</span><span class="method-args">(action)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000239-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000239-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 539</span>
539:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">allow_action?</span>(<span class="ruby-identifier">action</span>)
540:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">menu_group_screen?</span>
541:       <span class="ruby-identifier">allow_action</span> = <span class="ruby-keyword kw">false</span>
542:       <span class="ruby-identifier">screens</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
543:         <span class="ruby-identifier">allow_action</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">allow_action?</span>(<span class="ruby-identifier">action</span>)
544:         <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">allow_action</span>
545:       <span class="ruby-keyword kw">end</span>
546:     <span class="ruby-keyword kw">else</span>
547:       <span class="ruby-identifier">allow_action</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">controller</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;report_requests&quot;</span>
548:         <span class="ruby-identifier">reports</span> = <span class="ruby-constant">Report</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
549:         <span class="ruby-identifier">reports</span>.<span class="ruby-identifier">any?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">allow_action?</span>(<span class="ruby-identifier">action</span>) }
550:       <span class="ruby-keyword kw">else</span>
551:         <span class="ruby-identifier">current_user_permission</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span>)
552:       <span class="ruby-keyword kw">end</span>      
553:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">allow_action</span>
554:     
555:     <span class="ruby-constant">ApplicationController</span>.<span class="ruby-identifier">admin_mode?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">allow_action</span>
556:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000202" class="method-detail">
        <a name="M000202"></a>

        <div class="method-heading">
          <a href="#M000202" class="method-signature">
          <span class="method-name">childs</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000202-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000202-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/screen.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">childs</span>
32:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MenuGroupScreen</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Stock_Menu&quot;</span>
33:       <span class="ruby-ivar">@stocks</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Stock</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
34:       <span class="ruby-identifier">item_childs</span> = <span class="ruby-constant">StockTransaction</span>.<span class="ruby-identifier">childs</span>
35:       
36:       <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>        
37:       <span class="ruby-identifier">j</span> = <span class="ruby-value">0</span>
38:       
39:       <span class="ruby-ivar">@stock_childs</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@stocks</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
40:         <span class="ruby-identifier">stock_item_menu</span> = <span class="ruby-constant">MenuGroupScreen</span>.<span class="ruby-identifier">new</span>(
41:           <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">label</span>.<span class="ruby-identifier">descr</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/ /</span>,<span class="ruby-value str">&quot;_&quot;</span>),
42:           <span class="ruby-identifier">:screen_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>,
43:           <span class="ruby-identifier">:label_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">label_id</span>,
44:           <span class="ruby-identifier">:system</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
45:           <span class="ruby-identifier">:display_seq</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">i</span>,
46:           <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">label</span>.<span class="ruby-identifier">descr</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/ /</span>,<span class="ruby-value str">&quot;_&quot;</span>),
47:           <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;front_desk&quot;</span>
48:         )
49:         
50:         <span class="ruby-identifier">stock_item_menu</span>.<span class="ruby-identifier">id</span> = <span class="ruby-value">0</span>
51:         
52:         <span class="ruby-identifier">item_childs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
53:           <span class="ruby-identifier">stock_item_child</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">new</span>(
54:             <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{stock_item_menu.name}_#{v[:label].descr.gsub(/ /,&quot;_&quot;)}&quot;</span>,
55:             <span class="ruby-identifier">:label_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">v</span>[<span class="ruby-identifier">:label</span>].<span class="ruby-identifier">id</span>,
56:             <span class="ruby-identifier">:system</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
57:             <span class="ruby-identifier">:display_seq</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">j</span>,
58:             <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>,
59:             <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;stock_transactions&quot;</span>
60:           )
61:           
62:           <span class="ruby-identifier">stock_item_child</span>.<span class="ruby-identifier">type</span> = <span class="ruby-identifier">k</span>
63:           <span class="ruby-identifier">stock_item_child</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span>
64:           
65:           <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
66:           
67:           <span class="ruby-identifier">stock_item_menu</span>.<span class="ruby-identifier">childs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">stock_item_child</span>
68:         <span class="ruby-keyword kw">end</span>
69:         
70:         <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
71:         
72:         <span class="ruby-identifier">stock_item_menu</span>
73:       <span class="ruby-keyword kw">end</span>
74:     <span class="ruby-keyword kw">else</span>
75:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">childs_original</span>
76:     <span class="ruby-keyword kw">end</span>
77:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000257" class="method-detail">
        <a name="M000257"></a>

        <div class="method-heading">
          <a href="#M000257" class="method-signature">
          <span class="method-name">comparable_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000257-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000257-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 702</span>
702:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">comparable_fields</span>
703:     <span class="ruby-identifier">comparable_fields</span> = []
704:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
705:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Comparison</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderInfo</span>))
706:               <span class="ruby-identifier">comparable_fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>
707:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">nil?</span>
708:              <span class="ruby-identifier">comparable_fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">NumericField</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>)  <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeCombindedReferenceAttribute</span>)
709:           <span class="ruby-keyword kw">end</span>
710:     <span class="ruby-keyword kw">end</span>
711:     <span class="ruby-identifier">comparable_fields</span>
712:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000209" class="method-detail">
        <a name="M000209"></a>

        <div class="method-heading">
          <a href="#M000209" class="method-signature">
          <span class="method-name">control_revision?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000209-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000209-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">control_revision?</span>
116:     <span class="ruby-ivar">@control_revision</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">begin</span>
117:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">||=</span> {}
118:       <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">CheckBox</span>.<span class="ruby-identifier">true_or_false?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">value</span>[<span class="ruby-identifier">:revision_control</span>])
119:     <span class="ruby-keyword kw">end</span>
120:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000256" class="method-detail">
        <a name="M000256"></a>

        <div class="method-heading">
          <a href="#M000256" class="method-signature">
          <span class="method-name">date_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000256-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000256-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 698</span>
698:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">date_fields</span>
699:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">DateTimeField</span>) }
700:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000214" class="method-detail">
        <a name="M000214"></a>

        <div class="method-heading">
          <a href="#M000214" class="method-signature">
          <span class="method-name">default_sort_field_id_order</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000214-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000214-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_sort_field_id_order</span>
143:     <span class="ruby-ivar">@default_sort_field_id_order</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">field_ids</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>]
144:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000235" class="method-detail">
        <a name="M000235"></a>

        <div class="method-heading">
          <a href="#M000235" class="method-signature">
          <span class="method-name">dependencies</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000235-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000235-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 430</span>
430:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dependencies</span>
431:     <span class="ruby-ivar">@dependencies</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
432: 
433:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@dependencies</span>
434:       <span class="ruby-identifier">screen_ids</span> = [<span class="ruby-identifier">reference_custom_fields</span>, <span class="ruby-identifier">l2r_custom_fields</span>, <span class="ruby-identifier">scr_custom_fields</span>].<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfs</span><span class="ruby-operator">|</span>
435:         <span class="ruby-identifier">cfs</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">screen_id</span> } }
436:       <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">flatten</span>
437:       <span class="ruby-identifier">screen_ids</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">childs</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
438: 
439:       <span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">compact!</span>
440:       <span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">uniq!</span>
441: 
442:       <span class="ruby-ivar">@dependencies</span> = <span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s_id</span><span class="ruby-operator">|</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">s_id</span>) }.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">label_descr</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">label_descr</span>}
443:     <span class="ruby-keyword kw">end</span>
444: 
445:     <span class="ruby-ivar">@dependencies</span>
446:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000236" class="method-detail">
        <a name="M000236"></a>

        <div class="method-heading">
          <a href="#M000236" class="method-signature">
          <span class="method-name">dependents</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000236-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000236-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 448</span>
448:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dependents</span>
449:     <span class="ruby-ivar">@dependents</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
450: 
451:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@dependents</span>
452:       <span class="ruby-identifier">screen_ids</span> = <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
453:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">f</span>
454:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span> <span class="ruby-keyword kw">then</span>
455:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>
456:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>, <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LeftRight</span>, <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Parameter</span> <span class="ruby-keyword kw">then</span>
457:             <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">screen_id</span>
458:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeCombindedReference</span> <span class="ruby-keyword kw">then</span>
459:             <span class="ruby-identifier">ocr_field_id</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">CodeCombindedReference</span>.<span class="ruby-identifier">field_ocr_field_id</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">value</span>)
460:             
461:             <span class="ruby-constant">Field</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">ocr_field_id</span>).<span class="ruby-identifier">screen_id</span>
462:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">OptionCombindedReference</span> <span class="ruby-keyword kw">then</span>
463:             <span class="ruby-identifier">scr_field_id</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">OptionCombindedReference</span>.<span class="ruby-identifier">field_scr_field_id</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">value</span>)
464:             
465:             <span class="ruby-constant">Field</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">scr_field_id</span>).<span class="ruby-identifier">screen_id</span>
466:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">ScreenCombindedReference</span> <span class="ruby-keyword kw">then</span>
467:             <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">screen_ids</span>
468:           <span class="ruby-keyword kw">end</span>
469:         <span class="ruby-keyword kw">end</span>
470:       }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">uniq</span>
471: 
472:       <span class="ruby-identifier">screen_ids</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">parent</span>.<span class="ruby-identifier">system?</span>
473:       
474:       <span class="ruby-ivar">@dependents</span> = <span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s_id</span><span class="ruby-operator">|</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">s_id</span>) }.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">label_descr</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">label_descr</span>}
475: 
476:     <span class="ruby-keyword kw">end</span>
477: 
478:     <span class="ruby-ivar">@dependents</span>
479:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000237" class="method-detail">
        <a name="M000237"></a>

        <div class="method-heading">
          <a href="#M000237" class="method-signature">
          <span class="method-name">dependents?</span><span class="method-args">(dependents_screen)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000237-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000237-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 481</span>
481:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dependents?</span>(<span class="ruby-identifier">dependents_screen</span>)
482:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">false</span>
483:     <span class="ruby-identifier">dependents</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
484:        <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dependents_screen</span>.<span class="ruby-identifier">id</span>
485:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dependents_screen</span>
486:     <span class="ruby-identifier">result</span>
487:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000222" class="method-detail">
        <a name="M000222"></a>

        <div class="method-heading">
          <a href="#M000222" class="method-signature">
          <span class="method-name">display_as_menu_item?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
true:detail false:header
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000222-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000222-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 225</span>
225:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_as_menu_item?</span>
226:     <span class="ruby-ivar">@display_as_menu_item</span> = (<span class="ruby-ivar">@display_as_menu_item</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">display_in_menu?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MenuGroupScreen</span>))
227:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000220" class="method-detail">
        <a name="M000220"></a>

        <div class="method-heading">
          <a href="#M000220" class="method-signature">
          <span class="method-name">display_in_menu?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
true:detail false:header
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000220-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000220-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_in_menu?</span>
209:     <span class="ruby-ivar">@display_in_menu</span> = (
210:       <span class="ruby-ivar">@display_in_menu</span> <span class="ruby-keyword kw">or</span>
211:         <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">DetailScreen</span>)
212:     )
213:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000205" class="method-detail">
        <a name="M000205"></a>

        <div class="method-heading">
          <a href="#M000205" class="method-signature">
          <span class="method-name">field</span><span class="method-args">(field_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000205-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000205-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 93</span>
 93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">field</span>(<span class="ruby-identifier">field_id</span>)
 94:     <span class="ruby-ivar">@field_hash</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
 95:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@field_hash</span>.<span class="ruby-identifier">nil?</span>
 96:       <span class="ruby-ivar">@field_hash</span> = {}
 97:       <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@field_hash</span>[<span class="ruby-identifier">f</span>.<span class="ruby-identifier">id</span>] = <span class="ruby-identifier">f</span>}
 98:     <span class="ruby-keyword kw">end</span>
 99:     
100:     <span class="ruby-ivar">@field_hash</span>[<span class="ruby-identifier">field_id</span>]
101:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000211" class="method-detail">
        <a name="M000211"></a>

        <div class="method-heading">
          <a href="#M000211" class="method-signature">
          <span class="method-name">field_level</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000211-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000211-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 126</span>
126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">field_level</span>
127:     <span class="ruby-ivar">@field_level</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">level</span>.<span class="ruby-identifier">to_i</span> }.<span class="ruby-identifier">max</span> <span class="ruby-operator">||</span> <span class="ruby-value">1</span>
128:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000262" class="method-detail">
        <a name="M000262"></a>

        <div class="method-heading">
          <a href="#M000262" class="method-signature">
          <span class="method-name">filter_custom_fields</span><span class="method-args">(custom_fields)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000262-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000262-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 750</span>
750:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">filter_custom_fields</span>(<span class="ruby-identifier">custom_fields</span>)
751:     <span class="ruby-identifier">filter_custom_fields</span> = []
752:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
753:       <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span>
754:         <span class="ruby-identifier">filter_custom_fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">id</span>)
755:       <span class="ruby-keyword kw">end</span>
756:     <span class="ruby-keyword kw">end</span>
757:     <span class="ruby-identifier">filter_custom_fields</span>
758:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000238" class="method-detail">
        <a name="M000238"></a>

        <div class="method-heading">
          <a href="#M000238" class="method-signature">
          <span class="method-name">find_by_row_desctiption</span><span class="method-args">(text, login)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000238-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000238-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 489</span>
489:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_by_row_desctiption</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">login</span>)
490:     <span class="ruby-comment cmt"># ToDo: Find the Login reference field</span>
491: 
492:     <span class="ruby-comment cmt">#results = rows.find(:all).collect {|r| r if r.description.downcase.include?( text.downcase ) }.compact</span>
493:     <span class="ruby-identifier">custom_field_ids</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reference_custom_fields</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">descr_custom_field_ids</span>
494:     <span class="ruby-identifier">logincf</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LoginField</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
495:     <span class="ruby-identifier">staffREF</span> = <span class="ruby-constant">CustomField</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-value str">&quot;name = 'Salesman_REF'&quot;</span>))
496: 
497:     <span class="ruby-comment cmt"># Check Screen has login field or not?</span>
498:     <span class="ruby-identifier">chkLogin</span> = <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">'custom_field_id = ?'</span>, <span class="ruby-identifier">staffREF</span>.<span class="ruby-identifier">id</span>]) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">staffREF</span>.<span class="ruby-identifier">nil?</span>
499:     
500:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">description</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/#{Regexp.escape(text)}/i</span>}
501: 
502:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">chkLogin</span>.<span class="ruby-identifier">nil?</span>
503:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Hard coded Screen name 'Staff'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">RAILS_ENV</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/susbkk/</span>
504: 
505:       <span class="ruby-identifier">staff</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-value str">&quot;name = 'Staff'&quot;</span>))
506:       <span class="ruby-identifier">chkStaff</span> = <span class="ruby-identifier">staff</span>.<span class="ruby-identifier">rows</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,
507:         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:cells</span>],
508:         <span class="ruby-identifier">:conditions</span>  =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot; CELLS.value like ? and cells.field_id in (?)&quot;</span>, <span class="ruby-identifier">login</span>, <span class="ruby-identifier">logincf</span>.<span class="ruby-identifier">id</span>])
509:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">chkStaff</span>.<span class="ruby-identifier">nil?</span>
510:         <span class="ruby-identifier">staffrows</span> = <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
511:           <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:cells</span>],
512:           <span class="ruby-identifier">:conditions</span>  =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot; CELLS.value = ? and cells.field_id in (?)&quot;</span>, <span class="ruby-identifier">chkStaff</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">staffREF</span>.<span class="ruby-identifier">id</span>])  <span class="ruby-comment cmt">#use for mysql</span>
513:         <span class="ruby-identifier">filter_rows</span> = []
514:         <span class="ruby-identifier">staffrows</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">filter_rows</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">id</span>  }
515:         <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
516:           <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:cells</span>],
517:           <span class="ruby-identifier">:conditions</span>  =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot; CELLS.value like '%#{text.downcase}%' and cells.field_id in (?) and rows.id in (?)&quot;</span>, <span class="ruby-identifier">custom_field_ids</span>, <span class="ruby-identifier">filter_rows</span>],
518:           <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;CELLS.value&quot;</span>)  <span class="ruby-comment cmt">#use for mysql</span>
519:         <span class="ruby-comment cmt"># :order =&gt; &quot;CAST(value AS nvarchar)&quot;)   # use for sql server</span>
520:       <span class="ruby-keyword kw">end</span>
521:     <span class="ruby-keyword kw">end</span>
522: 
523:     <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">false</span>) <span class="ruby-comment cmt"># Check User Login</span>
524:       <span class="ruby-identifier">results</span> = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
525:         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:cells</span>],
526:         <span class="ruby-identifier">:conditions</span>  =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot; CELLS.value like ? and cells.field_id in (?)&quot;</span>, <span class="ruby-identifier">login</span>, <span class="ruby-identifier">logincf</span>.<span class="ruby-identifier">id</span>],
527:         <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;CELLS.value&quot;</span>)  <span class="ruby-comment cmt">#use for mysql</span>
528:     <span class="ruby-keyword kw">else</span>
529: 
530:     <span class="ruby-keyword kw">end</span>
531: 
532: 
533:     {
534:       <span class="ruby-identifier">:rows</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">r</span>) <span class="ruby-operator">&lt;=</span> <span class="ruby-value">10</span> }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">description</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">description</span> },
535:       <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">length</span>
536:     }
537:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000267" class="method-detail">
        <a name="M000267"></a>

        <div class="method-heading">
          <a href="#M000267" class="method-signature">
          <span class="method-name">find_descr_field</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000267-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000267-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 792</span>
792:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_descr_field</span>
793:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@find_descr_field</span>.<span class="ruby-identifier">nil?</span>
794:     <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
795:       <span class="ruby-ivar">@find_descr_field</span> = <span class="ruby-identifier">f</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;Descr&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">down_case</span> = <span class="ruby-value str">&quot;Description&quot;</span>)
796:     <span class="ruby-keyword kw">end</span>
797:     <span class="ruby-keyword kw">end</span>
798:     <span class="ruby-ivar">@find_descr_field</span>
799:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000224" class="method-detail">
        <a name="M000224"></a>

        <div class="method-heading">
          <a href="#M000224" class="method-signature">
          <span class="method-name">generate_xml</span><span class="method-args">(filtered_row_ids,header_row_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000224-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000224-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 236</span>
236:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_xml</span>(<span class="ruby-identifier">filtered_row_ids</span>,<span class="ruby-identifier">header_row_id</span>)
237:         
238:     <span class="ruby-identifier">xml_str</span> = <span class="ruby-value str">&quot;&quot;</span>
239:     <span class="ruby-identifier">xml_str</span> = <span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; ?&gt; \n&quot;</span>
240:     <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;row_result&gt;\n&quot;</span>
241:     <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell_value&gt;\n&quot;</span>
242:         
243:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">header_row_id</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>)
244:     
245:       <span class="ruby-comment cmt">#----------------Generate Header --------------------</span>
246:         
247:       <span class="ruby-identifier">column_number</span> = <span class="ruby-value">10</span> <span class="ruby-comment cmt"># starting at 10 because of 10 come before 2</span>
248:       <span class="ruby-identifier">row_number</span> = <span class="ruby-value">10</span>
249:             
250:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
251:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
252:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">generate_xml</span>(<span class="ruby-identifier">row_number</span>,<span class="ruby-identifier">column_number</span>)
253:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
254:         <span class="ruby-identifier">column_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
255:       <span class="ruby-keyword kw">end</span>
256:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
257:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;row_id type=\&quot;integer\&quot;&gt;10&lt;/row_id&gt;\n&quot;</span>
258:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;field_id type=\&quot;integer\&quot;&gt;#{column_number}&lt;/field_id&gt;\n&quot;</span>
259:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;value&gt;Remark&lt;/value&gt;\n&quot;</span>
260:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
261:       <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
262:         
263:       <span class="ruby-comment cmt"># ---------------Generate Data-----------------------</span>
264:             
265:       <span class="ruby-identifier">rows_for_generate</span> = <span class="ruby-keyword kw">nil</span>
266:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filtered_row_ids</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
267:         <span class="ruby-identifier">rows_for_generate</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rows</span>
268:       <span class="ruby-keyword kw">else</span>
269:         <span class="ruby-identifier">rows_for_generate</span> = <span class="ruby-constant">Row</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id in (&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filtered_row_ids</span> <span class="ruby-operator">+</span><span class="ruby-value str">&quot;)&quot;</span>)
270:       <span class="ruby-keyword kw">end</span>
271:             
272:       <span class="ruby-identifier">rows_for_generate</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
273:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">generate_xml</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>,<span class="ruby-identifier">row_number</span>)
274:         <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
275:       <span class="ruby-keyword kw">end</span>
276:       
277:     <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># Detail Screen</span>
278:              
279:       <span class="ruby-identifier">header_row_id</span> = <span class="ruby-identifier">header_row_id</span>.<span class="ruby-identifier">chop</span>
280:       <span class="ruby-identifier">header_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span>)
281:       <span class="ruby-identifier">header_rows</span> = <span class="ruby-constant">Row</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">header_row_id</span>)
282:       <span class="ruby-identifier">rows</span> = <span class="ruby-constant">Row</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;rows.*&quot;</span>,<span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'inner join detail_rows as a on rows.id = a.row_id and a.header_row_id = '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">header_row_id</span> <span class="ruby-operator">+</span> <span class="ruby-value str">' and rows.screen_id = '</span> <span class="ruby-operator">+</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">to_s</span>)
283:              
284:       <span class="ruby-comment cmt">#--------------Start Gen Parent Data ----------------</span>
285:       <span class="ruby-comment cmt">#----------------Generate Header --------------------</span>
286:              
287:       <span class="ruby-identifier">column_number</span> = <span class="ruby-value">10</span>
288:       <span class="ruby-identifier">row_number</span> = <span class="ruby-value">10</span>
289:              
290:       <span class="ruby-identifier">header_screen</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
291:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
292:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">generate_xml</span>(<span class="ruby-identifier">row_number</span>,<span class="ruby-identifier">column_number</span>)
293:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
294:         <span class="ruby-identifier">column_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
295:       <span class="ruby-keyword kw">end</span>
296:              
297:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
298:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;row_id type=\&quot;integer\&quot;&gt;#{row_number}&lt;/row_id&gt;\n&quot;</span>
299:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;field_id type=\&quot;integer\&quot;&gt;#{column_number}&lt;/field_id&gt;\n&quot;</span>
300:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;value&gt;Remark&lt;/value&gt;\n&quot;</span>
301:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
302:              
303:       <span class="ruby-comment cmt"># ---------------Generate Value-----------------------</span>
304:       <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
305:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">header_rows</span>.<span class="ruby-identifier">generate_xml3</span>(<span class="ruby-identifier">header_screen</span>.<span class="ruby-identifier">fields</span>,<span class="ruby-identifier">row_number</span>)
306:       <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
307:              
308:       <span class="ruby-comment cmt">#--------------End Gen Parent Data-------------------</span>
309:       <span class="ruby-comment cmt">#-------------Start Gen Child Data-------------------</span>
310:              
311:       <span class="ruby-comment cmt">#----------------Generate Header --------------------</span>
312:              
313:       <span class="ruby-identifier">column_number</span> = <span class="ruby-value">10</span>
314:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
315:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
316:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">generate_xml</span>(<span class="ruby-identifier">row_number</span>,<span class="ruby-identifier">column_number</span>)
317:         <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
318:         <span class="ruby-identifier">column_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
319:       <span class="ruby-keyword kw">end</span>
320:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;cell&gt;\n&quot;</span>
321:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;row_id type=\&quot;integer\&quot;&gt;#{row_number}&lt;/row_id&gt;\n&quot;</span>
322:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;field_id type=\&quot;integer\&quot;&gt;#{column_number}&lt;/field_id&gt;\n&quot;</span>
323:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;value&gt;Remark&lt;/value&gt;\n&quot;</span>
324:       <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell&gt;\n&quot;</span>
325:              
326:       <span class="ruby-comment cmt"># ---------------Generate Value-----------------------</span>
327:       <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
328:       <span class="ruby-identifier">rows</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
329:         <span class="ruby-keyword kw">if</span>  (<span class="ruby-identifier">r</span>.<span class="ruby-identifier">cells</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>).<span class="ruby-identifier">size</span>
330:           <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">generate_xml3</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>,<span class="ruby-identifier">row_number</span>)
331:         <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#not equal</span>
332:           <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">generate_xml3</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>,<span class="ruby-identifier">row_number</span>)
333:         <span class="ruby-keyword kw">end</span>
334:         <span class="ruby-identifier">row_number</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
335:       <span class="ruby-keyword kw">end</span>
336:     <span class="ruby-keyword kw">end</span>
337:     <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/cell_value&gt;\n&quot;</span>
338:     <span class="ruby-identifier">xml_str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/row_result&gt;&quot;</span>
339:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">xml_str</span>
340:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000250" class="method-detail">
        <a name="M000250"></a>

        <div class="method-heading">
          <a href="#M000250" class="method-signature">
          <span class="method-name">get_alias_screen</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000250-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000250-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 646</span>
646:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_alias_screen</span>
647:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">alias_screen</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
648:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">alias_screen</span>)
649:     <span class="ruby-keyword kw">end</span>
650:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">new</span>()   
651:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000252" class="method-detail">
        <a name="M000252"></a>

        <div class="method-heading">
          <a href="#M000252" class="method-signature">
          <span class="method-name">get_alias_screen_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000252-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000252-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_alias_screen_name</span>
661:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">alias_screen</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
662:       <span class="ruby-identifier">alias_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">alias_screen</span>)
663:       <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">alias_screen</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">alias_screen</span>.<span class="ruby-identifier">name</span>
664:     <span class="ruby-keyword kw">end</span>
665:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;-&quot;</span>
666:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000249" class="method-detail">
        <a name="M000249"></a>

        <div class="method-heading">
          <a href="#M000249" class="method-signature">
          <span class="method-name">get_parent_screen</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000249-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000249-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 639</span>
639:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_parent_screen</span>
640:     <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;&quot;</span>)
641:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span>)
642:     <span class="ruby-keyword kw">end</span>
643:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">new</span>()
644:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000251" class="method-detail">
        <a name="M000251"></a>

        <div class="method-heading">
          <a href="#M000251" class="method-signature">
          <span class="method-name">get_relate_screen</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000251-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000251-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 653</span>
653:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_relate_screen</span>
654:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">relate_screen</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
655:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">relate_screen</span>)
656:     <span class="ruby-keyword kw">end</span>
657:     <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">new</span>()
658:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000253" class="method-detail">
        <a name="M000253"></a>

        <div class="method-heading">
          <a href="#M000253" class="method-signature">
          <span class="method-name">get_relate_screen_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000253-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000253-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 668</span>
668:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_relate_screen_name</span>
669:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">relate_screen</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
670:       <span class="ruby-identifier">relate_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">relate_screen</span>)
671:       <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">relate_screen</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">relate_screen</span>.<span class="ruby-identifier">name</span>
672:     <span class="ruby-keyword kw">end</span>
673:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;-&quot;</span>
674:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000248" class="method-detail">
        <a name="M000248"></a>

        <div class="method-heading">
          <a href="#M000248" class="method-signature">
          <span class="method-name">get_releted_screens_for_special_search</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000248-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000248-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 633</span>
633:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_releted_screens_for_special_search</span>
634:     <span class="ruby-identifier">lists_of_screens</span> = [<span class="ruby-value str">&quot;Customer&quot;</span>,<span class="ruby-value str">&quot;Business Record&quot;</span>,<span class="ruby-value str">&quot;Action&quot;</span>,<span class="ruby-value str">&quot;Task&quot;</span>]
635:     <span class="ruby-identifier">all_screens</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lists_of_screens</span>})
636:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">all_screens</span>
637:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000246" class="method-detail">
        <a name="M000246"></a>

        <div class="method-heading">
          <a href="#M000246" class="method-signature">
          <span class="method-name">get_staff_ref_field_id</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000246-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000246-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 616</span>
616:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_staff_ref_field_id</span>
617:     <span class="ruby-comment cmt"># ToDo: Find the Login reference field</span>
618:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RAILS_ENV</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/susbkk/</span>
619:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
620:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Salesman_REF&quot;</span>
621:       <span class="ruby-keyword kw">end</span>
622:     <span class="ruby-keyword kw">end</span>
623:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
624:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000230" class="method-detail">
        <a name="M000230"></a>

        <div class="method-heading">
          <a href="#M000230" class="method-signature">
          <span class="method-name">has_a?</span><span class="method-args">(custom_field_class)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000230-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000230-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_a?</span>(<span class="ruby-identifier">custom_field_class</span>)
384:     <span class="ruby-ivar">@has_a</span> <span class="ruby-operator">||=</span> {}
385:     <span class="ruby-ivar">@has_a</span>[<span class="ruby-identifier">custom_field_class</span>] <span class="ruby-operator">||=</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-identifier">custom_field_class</span>) }.<span class="ruby-identifier">empty?</span>
386:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000232" class="method-detail">
        <a name="M000232"></a>

        <div class="method-heading">
          <a href="#M000232" class="method-signature">
          <span class="method-name">has_a_auto_numbering_with_unique?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000232-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000232-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 392</span>
392:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_a_auto_numbering_with_unique?</span>
393:     <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">AutoNumbering</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_unique?</span> }.<span class="ruby-identifier">empty?</span>
394:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000221" class="method-detail">
        <a name="M000221"></a>

        <div class="method-heading">
          <a href="#M000221" class="method-signature">
          <span class="method-name">has_child_display_in_menu?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
true:detail false:header
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000221-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000221-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 216</span>
216:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_child_display_in_menu?</span>
217:     <span class="ruby-identifier">has_child_display_in_menu</span> = <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MenuGroupScreen</span>)
218:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">childs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
219:       <span class="ruby-identifier">has_child_display_in_menu</span> = <span class="ruby-identifier">has_child_display_in_menu</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">c</span>.<span class="ruby-identifier">display_in_menu?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">allow_action?</span>(<span class="ruby-value str">&quot;index&quot;</span>))
220:     <span class="ruby-keyword kw">end</span>
221:     <span class="ruby-identifier">has_child_display_in_menu</span>
222:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000261" class="method-detail">
        <a name="M000261"></a>

        <div class="method-heading">
          <a href="#M000261" class="method-signature">
          <span class="method-name">has_field</span><span class="method-args">(cusom_field_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000261-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000261-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 742</span>
742:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_field</span>(<span class="ruby-identifier">cusom_field_id</span>)
743:     <span class="ruby-identifier">result</span> = []
744:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
745:      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cusom_field_id</span>.<span class="ruby-identifier">to_i</span>)
746:     <span class="ruby-keyword kw">end</span>
747:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
748:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000254" class="method-detail">
        <a name="M000254"></a>

        <div class="method-heading">
          <a href="#M000254" class="method-signature">
          <span class="method-name">has_field?</span><span class="method-args">(field_type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000254-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000254-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 676</span>
676:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_field?</span>(<span class="ruby-identifier">field_type</span>)
677:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">false</span>
678:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
679:      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-identifier">field_type</span>)
680:     <span class="ruby-keyword kw">end</span>
681:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
682:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000247" class="method-detail">
        <a name="M000247"></a>

        <div class="method-heading">
          <a href="#M000247" class="method-signature">
          <span class="method-name">has_issue_tracking_field</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000247-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000247-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 626</span>
626:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_issue_tracking_field</span>
627:     <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
628:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>)) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">IssueTracking</span>))
629:     <span class="ruby-keyword kw">end</span>
630:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
631:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000243" class="method-detail">
        <a name="M000243"></a>

        <div class="method-heading">
          <a href="#M000243" class="method-signature">
          <span class="method-name">has_login_custom_field?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000243-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000243-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 582</span>
582:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_login_custom_field?</span>
583:     <span class="ruby-ivar">@has_login_custom_field</span> = (
584:       <span class="ruby-ivar">@has_login_custom_field</span> <span class="ruby-operator">||</span> 
585:         <span class="ruby-keyword kw">begin</span>
586:         <span class="ruby-ivar">@tested_has_login_custom_field</span> = <span class="ruby-keyword kw">true</span>
587:         <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
588:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">class</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>)
589:         }.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LoginField</span>)
590:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@tested_has_login_custom_field</span>
591:     )
592:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000245" class="method-detail">
        <a name="M000245"></a>

        <div class="method-heading">
          <a href="#M000245" class="method-signature">
          <span class="method-name">has_loginfield?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000245-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000245-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 609</span>
609:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_loginfield?</span>
610:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
611:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LoginField</span>)
612:     <span class="ruby-keyword kw">end</span>
613:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
614:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000259" class="method-detail">
        <a name="M000259"></a>

        <div class="method-heading">
          <a href="#M000259" class="method-signature">
          <span class="method-name">has_required_search?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000259-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000259-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 724</span>
724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_required_search?</span>
725:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">false</span>
726:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
727:      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">required_search?</span>
728:     <span class="ruby-keyword kw">end</span>
729:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
730:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000231" class="method-detail">
        <a name="M000231"></a>

        <div class="method-heading">
          <a href="#M000231" class="method-signature">
          <span class="method-name">has_scr_field?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000231-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000231-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 388</span>
388:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_scr_field?</span>
389:     <span class="ruby-identifier">has_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">ScreenCombindedReference</span>)
390:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000265" class="method-detail">
        <a name="M000265"></a>

        <div class="method-heading">
          <a href="#M000265" class="method-signature">
          <span class="method-name">header_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000265-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000265-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 772</span>
772:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">header_fields</span>
773:     <span class="ruby-identifier">result</span> = []
774:     <span class="ruby-identifier">h_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span>.<span class="ruby-identifier">to_i</span>)
775:     <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">system?</span>
776:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">fields</span>
777:       <span class="ruby-identifier">h_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">screen_id</span>.<span class="ruby-identifier">to_i</span>) <span class="ruby-comment cmt"># why? self_screen.header == nil</span>
778:     <span class="ruby-keyword kw">end</span>
779:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">flatten</span>()
780:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000260" class="method-detail">
        <a name="M000260"></a>

        <div class="method-heading">
          <a href="#M000260" class="method-signature">
          <span class="method-name">include_required_search?</span><span class="method-args">(custom_fields)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000260-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000260-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 732</span>
732:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include_required_search?</span>(<span class="ruby-identifier">custom_fields</span>)
733:     <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">true</span>
734:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
735:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">required_search?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">nil?</span>
736:         <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field_id</span>.<span class="ruby-identifier">to_s</span>)
737:       <span class="ruby-keyword kw">end</span>
738:     <span class="ruby-keyword kw">end</span>
739:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>
740:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000233" class="method-detail">
        <a name="M000233"></a>

        <div class="method-heading">
          <a href="#M000233" class="method-signature">
          <span class="method-name">l2r_custom_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000233-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000233-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 396</span>
396:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">l2r_custom_fields</span>
397:     <span class="ruby-ivar">@l2r_custom_fields</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
398: 
399:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@l2r_custom_fields</span>
400:       <span class="ruby-identifier">custom_fields</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LeftRight</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
401: 
402:       <span class="ruby-comment cmt"># add permission of screen access</span>
403:       <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">collect!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span>
404:         <span class="ruby-identifier">cf</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">screen_id</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:id</span>]
405:       }
406: 
407:       <span class="ruby-ivar">@l2r_custom_fields</span> = <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">compact</span>
408:     <span class="ruby-keyword kw">end</span>
409: 
410:     <span class="ruby-ivar">@l2r_custom_fields</span>
411:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000206" class="method-detail">
        <a name="M000206"></a>

        <div class="method-heading">
          <a href="#M000206" class="method-signature">
          <span class="method-name">label_descr</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000206-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000206-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 103</span>
103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">label_descr</span>
104:     <span class="ruby-identifier">label</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-constant">Label</span>.<span class="ruby-identifier">missing_msg</span>(<span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:label_id</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">label</span>.<span class="ruby-identifier">descr</span>
105:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000207" class="method-detail">
        <a name="M000207"></a>

        <div class="method-heading">
          <a href="#M000207" class="method-signature">
          <span class="method-name">label_descr_with_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000207-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000207-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">label_descr_with_name</span>
108:     <span class="ruby-node">&quot;#{label_descr} [#{name}]&quot;</span>
109:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000210" class="method-detail">
        <a name="M000210"></a>

        <div class="method-heading">
          <a href="#M000210" class="method-signature">
          <span class="method-name">level</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000210-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000210-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">level</span>
123:     <span class="ruby-ivar">@level</span> <span class="ruby-operator">||=</span> (<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
124:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000212" class="method-detail">
        <a name="M000212"></a>

        <div class="method-heading">
          <a href="#M000212" class="method-signature">
          <span class="method-name">list_fields_level</span><span class="method-args">(level_i)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000212-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000212-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list_fields_level</span>(<span class="ruby-identifier">level_i</span>)
131:     <span class="ruby-ivar">@list_fields_level</span> <span class="ruby-operator">||=</span> {}
132:     <span class="ruby-ivar">@list_fields_level</span>[<span class="ruby-identifier">level_i</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">level_i</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">display_in_list?</span>}
133:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000242" class="method-detail">
        <a name="M000242"></a>

        <div class="method-heading">
          <a href="#M000242" class="method-signature">
          <span class="method-name">login_reference_custom_field_ids</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000242-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000242-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 570</span>
570:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">login_reference_custom_field_ids</span>
571:     <span class="ruby-ivar">@login_custom_field_ids</span> = (
572:       <span class="ruby-ivar">@login_custom_field_ids</span> <span class="ruby-operator">||</span>
573:         <span class="ruby-keyword kw">begin</span>
574:         <span class="ruby-identifier">result</span> =    <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
575:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field_id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">has_login_custom_field?</span>
576:         }
577:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">compact</span>
578:       <span class="ruby-keyword kw">end</span>
579:     )
580:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000240" class="method-detail">
        <a name="M000240"></a>

        <div class="method-heading">
          <a href="#M000240" class="method-signature">
          <span class="method-name">menu_group_screen?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000240-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000240-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 558</span>
558:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">menu_group_screen?</span>
559:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">MenuGroupScreen</span>)
560:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000213" class="method-detail">
        <a name="M000213"></a>

        <div class="method-heading">
          <a href="#M000213" class="method-signature">
          <span class="method-name">non_ref_description_custom_field_ids</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000213-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000213-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 135</span>
135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">non_ref_description_custom_field_ids</span>
136:     <span class="ruby-ivar">@non_ref_description_custom_field_ids</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
137:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field_id</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">display_in_description?</span> <span class="ruby-operator">&amp;&amp;</span>
138:         <span class="ruby-operator">!</span><span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>)
139:     }.<span class="ruby-identifier">compact</span>
140:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000264" class="method-detail">
        <a name="M000264"></a>

        <div class="method-heading">
          <a href="#M000264" class="method-signature">
          <span class="method-name">option_combined_reference_field</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000264-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000264-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_combined_reference_field</span>()
767:     <span class="ruby-ivar">@option_combined_reference_field</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
768:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">OptionCombindedReference</span>)
769:     }.<span class="ruby-identifier">first</span>
770:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000215" class="method-detail">
        <a name="M000215"></a>

        <div class="method-heading">
          <a href="#M000215" class="method-signature">
          <span class="method-name">path_ids</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000215-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000215-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path_ids</span>
147:     <span class="ruby-ivar">@path_ids</span> <span class="ruby-operator">||=</span> (<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> [<span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:id</span>]] <span class="ruby-operator">+</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">path_ids</span>
148:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000241" class="method-detail">
        <a name="M000241"></a>

        <div class="method-heading">
          <a href="#M000241" class="method-signature">
          <span class="method-name">permission</span><span class="method-args">(ru)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000241-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000241-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 562</span>
562:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">permission</span>(<span class="ruby-identifier">ru</span>)
563:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ru</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Role</span>)
564:       <span class="ruby-identifier">role_permissions</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot; role_id = ? &quot;</span>, <span class="ruby-identifier">ru</span>.<span class="ruby-identifier">id</span>])
565:     <span class="ruby-keyword kw">else</span>
566:       <span class="ruby-identifier">user_permissions</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span>[<span class="ruby-value str">&quot; user_id = ? &quot;</span>, <span class="ruby-identifier">ru</span>.<span class="ruby-identifier">id</span>])
567:     <span class="ruby-keyword kw">end</span>
568:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000223" class="method-detail">
        <a name="M000223"></a>

        <div class="method-heading">
          <a href="#M000223" class="method-signature">
          <span class="method-name">prefix</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000223-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000223-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 229</span>
229:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prefix</span>
230:     <span class="ruby-ivar">@prefix</span> = (
231:       <span class="ruby-ivar">@prefix</span> <span class="ruby-keyword kw">or</span>
232:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;Screen&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>)
233:     )
234:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000266" class="method-detail">
        <a name="M000266"></a>

        <div class="method-heading">
          <a href="#M000266" class="method-signature">
          <span class="method-name">reference_attribute_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000266-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000266-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 782</span>
782:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reference_attribute_fields</span>
783:     <span class="ruby-identifier">result</span> = []
784:     <span class="ruby-identifier">h_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screen_id</span>.<span class="ruby-identifier">to_i</span>)
785:     <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">system?</span>
786:       <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">fields</span>
787:       <span class="ruby-identifier">h_screen</span> = <span class="ruby-constant">Screen</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">h_screen</span>.<span class="ruby-identifier">screen_id</span>.<span class="ruby-identifier">to_i</span>) <span class="ruby-comment cmt"># why? self_screen.header == nil</span>
788:     <span class="ruby-keyword kw">end</span>
789:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">flatten</span>()
790:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000229" class="method-detail">
        <a name="M000229"></a>

        <div class="method-heading">
          <a href="#M000229" class="method-signature">
          <span class="method-name">reference_custom_field_ids</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000229-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000229-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 379</span>
379:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reference_custom_field_ids</span>
380:     <span class="ruby-identifier">reference_custom_fields</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">id</span> }
381:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000228" class="method-detail">
        <a name="M000228"></a>

        <div class="method-heading">
          <a href="#M000228" class="method-signature">
          <span class="method-name">reference_custom_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000228-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000228-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 364</span>
364:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reference_custom_fields</span>
365:     <span class="ruby-ivar">@reference_custom_fields</span> = [] <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
366:     <span class="ruby-ivar">@reference_custom_fields</span> <span class="ruby-operator">||=</span> []
367:     
368:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@reference_custom_fields</span>.<span class="ruby-identifier">empty?</span>
369:       <span class="ruby-identifier">custom_fields</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
370: 
371:       <span class="ruby-ivar">@reference_custom_fields</span> = <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span>
372:         <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">screen_id</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:id</span>]
373:       }
374:     <span class="ruby-keyword kw">end</span>
375: 
376:     <span class="ruby-ivar">@reference_custom_fields</span>
377:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000258" class="method-detail">
        <a name="M000258"></a>

        <div class="method-heading">
          <a href="#M000258" class="method-signature">
          <span class="method-name">references_custom_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000258-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000258-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">references_custom_fields</span>
715:     <span class="ruby-identifier">references_custom_fields</span> = []
716:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
717:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">nil?</span>
718:         <span class="ruby-identifier">references_custom_fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>)
719:       <span class="ruby-keyword kw">end</span>
720:     <span class="ruby-keyword kw">end</span>
721:     <span class="ruby-identifier">references_custom_fields</span>
722:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000226" class="method-detail">
        <a name="M000226"></a>

        <div class="method-heading">
          <a href="#M000226" class="method-signature">
          <span class="method-name">relation_types</span><span class="method-args">(relate_screen)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
~TODO implement more type Parameter, CCR
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000226-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000226-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 347</span>
347:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relation_types</span>(<span class="ruby-identifier">relate_screen</span>)
348:     <span class="ruby-ivar">@relation_types</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
349:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fields</span><span class="ruby-operator">::</span><span class="ruby-constant">Data</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span> 
350:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>
351:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>
352:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">inlude?</span>(<span class="ruby-identifier">relate_screen</span>.<span class="ruby-identifier">id</span>)
353:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LeftRight</span>
354:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">screen_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">relate_screen</span>.<span class="ruby-identifier">id</span>
355:         <span class="ruby-keyword kw">end</span>
356:       <span class="ruby-keyword kw">end</span>
357:     }.<span class="ruby-identifier">compact</span>
358:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000225" class="method-detail">
        <a name="M000225"></a>

        <div class="method-heading">
          <a href="#M000225" class="method-signature">
          <span class="method-name">relations</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000225-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000225-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 342</span>
342:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relations</span>
343:     <span class="ruby-identifier">dependents</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dependencies</span>
344:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000204" class="method-detail">
        <a name="M000204"></a>

        <div class="method-heading">
          <a href="#M000204" class="method-signature">
          <span class="method-name">reload_uncached_association</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Force unloading un-cached associations
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000204-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000204-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/screen.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload_uncached_association</span>
85:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screens</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">reload_uncached_association</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">screens</span>.<span class="ruby-identifier">loaded?</span>
86:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">reload_uncached_association</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">loaded?</span>
87: 
88:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rows</span>.<span class="ruby-identifier">reload</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rows</span>.<span class="ruby-identifier">loaded?</span>
89:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">role_screens</span>.<span class="ruby-identifier">reload</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">role_screens</span>.<span class="ruby-identifier">loaded?</span>
90:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user_screens</span>.<span class="ruby-identifier">reload</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">user_screens</span>.<span class="ruby-identifier">loaded?</span>
91:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000268" class="method-detail">
        <a name="M000268"></a>

        <div class="method-heading">
          <a href="#M000268" class="method-signature">
          <span class="method-name">require_permission?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000268-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000268-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 801</span>
801:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_permission?</span>
802:     <span class="ruby-comment cmt">#~ ToDo: Add setting to specify if the screen neeed to check User/Role permission</span>
803:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'Report Requests'</span>
804:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000234" class="method-detail">
        <a name="M000234"></a>

        <div class="method-heading">
          <a href="#M000234" class="method-signature">
          <span class="method-name">scr_custom_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000234-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000234-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 413</span>
413:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scr_custom_fields</span>
414:     <span class="ruby-ivar">@scr_custom_fields</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_cached?</span>
415: 
416:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@scr_custom_fields</span>
417:       <span class="ruby-identifier">custom_fields</span> = <span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">ScreenCombindedReference</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
418: 
419:       <span class="ruby-comment cmt"># add permission of screen access</span>
420:       <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">collect!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">cf</span><span class="ruby-operator">|</span>
421:         <span class="ruby-identifier">cf</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cf</span>.<span class="ruby-identifier">screen_ids</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">s_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s_id</span> }.<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:id</span>])
422:       }
423: 
424:       <span class="ruby-ivar">@scr_custom_fields</span> = <span class="ruby-identifier">custom_fields</span>.<span class="ruby-identifier">compact</span>
425:     <span class="ruby-keyword kw">end</span>
426: 
427:     <span class="ruby-ivar">@scr_custom_fields</span>
428:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000263" class="method-detail">
        <a name="M000263"></a>

        <div class="method-heading">
          <a href="#M000263" class="method-signature">
          <span class="method-name">screen_combined_reference_field</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000263-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000263-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">screen_combined_reference_field</span>()
761:     <span class="ruby-ivar">@screen_combined_reference_field</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
762:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">ScreenCombindedReference</span>)
763:     }.<span class="ruby-identifier">first</span>
764:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000208" class="method-detail">
        <a name="M000208"></a>

        <div class="method-heading">
          <a href="#M000208" class="method-signature">
          <span class="method-name">system?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000208-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000208-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">system?</span>
112:     <span class="ruby-ivar">@is_system</span> <span class="ruby-operator">||=</span> (<span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:system</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
113:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000203" class="method-detail">
        <a name="M000203"></a>

        <div class="method-heading">
          <a href="#M000203" class="method-signature">
          <span class="method-name">transaction_childs</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000203-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000203-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/screen.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transaction_childs</span>
80:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">childs</span>.<span class="ruby-identifier">select</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">sc</span><span class="ruby-operator">|</span> <span class="ruby-constant">StockTransaction</span>.<span class="ruby-identifier">transaction_childs</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">sc</span>.<span class="ruby-identifier">type</span>)}
81:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000244" class="method-detail">
        <a name="M000244"></a>

        <div class="method-heading">
          <a href="#M000244" class="method-signature">
          <span class="method-name">unuse_user</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000244-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000244-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 594</span>
594:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unuse_user</span>
595:     <span class="ruby-identifier">used_user</span> = []
596:     <span class="ruby-identifier">users</span> = []
597:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
598:       <span class="ruby-constant">Cell</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;field_id = ?&quot;</span>,<span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field_id</span>]).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
599:         <span class="ruby-identifier">used_user</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
600:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">f</span>.<span class="ruby-identifier">custom_field</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CustomFields</span><span class="ruby-operator">::</span><span class="ruby-constant">LoginField</span>))
601:     <span class="ruby-keyword kw">end</span>
602:     
603:     <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_active_users</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span>
604:       <span class="ruby-identifier">users</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">login</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">used_user</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">u</span>.<span class="ruby-identifier">login</span>.<span class="ruby-identifier">to_s</span>))
605:     <span class="ruby-keyword kw">end</span>
606:     <span class="ruby-identifier">users</span>.<span class="ruby-identifier">sort</span>
607:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000227" class="method-detail">
        <a name="M000227"></a>

        <div class="method-heading">
          <a href="#M000227" class="method-signature">
          <span class="method-name">used?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000227-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000227-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/screen.rb, line 360</span>
360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">used?</span>
361:     <span class="ruby-operator">!</span><span class="ruby-identifier">reference_custom_fields</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scr_custom_fields</span>.<span class="ruby-identifier">empty?</span>
362:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>